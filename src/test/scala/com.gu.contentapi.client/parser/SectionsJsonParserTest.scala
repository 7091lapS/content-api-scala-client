package com.gu.contentapi.client.parser

import org.scalatest.{Matchers, FlatSpec}
import com.gu.contentapi.client.ClientTest

class SectionsJsonParserTest extends FlatSpec with Matchers with ClientTest {

  // generated by:
  // http://content.guardianapis.com/sections.json
  lazy val sectionsResponse = JsonParser.parseSections(loadJson("sections.json"))

  "sections endpoint parser" should "parse basic reponse header" in {
    sectionsResponse.status should be ("ok")
    sectionsResponse.userTier should be ("free")
    sectionsResponse.total should be (39)
  }


  it should "parse the sections" in {
    sectionsResponse.results.size should be (39)
    sectionsResponse.results.head.webTitle should be ("Art and design")
  }
}